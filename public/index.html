<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Go Travel ‚úàÔ∏è</title>
<link rel="icon" href="/favicon.ico" />
  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- –®—Ä–∏—Ñ—Ç -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <!-- Telegram WebApp SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- –°—Ç–∏–ª–∏ -->
  <link rel="stylesheet" href="style.css">

  <style>
    @media (max-width: 400px) {
      h1 {
        font-size: 1.25rem !important;
      }
      .tab-btn {
        padding: 0.5rem 0.75rem !important;
        font-size: 0.75rem !important;
      }
      .btn {
        font-size: 0.75rem !important;
        padding: 0.4rem 0.75rem !important;
      }
    }
  </style>
</head>
<body class="opacity-0 bg-gradient-to-r from-sky-100 to-indigo-100 min-h-screen p-4 font-[Inter]">
  <div class="w-full max-w-2xl mx-auto px-2 sm:px-4 relative">
    <!-- –Ø–∑—ã–∫–æ–≤–æ–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É -->
    <select id="langSwitcher"
      class="absolute top-0 right-0 mt-2 mr-2 text-sm bg-white border border-gray-300 rounded px-2 py-1 shadow-sm focus:outline-none">
      <option value="ru">RU</option>
      <option value="en">EN</option>
    </select>

    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-2 pr-12">
      <h1 class="text-2xl sm:text-3xl font-bold leading-tight">Go Travel ‚úàÔ∏è</h1>
    </div>
  </div>

  <!-- –í–∫–ª–∞–¥–∫–∏ -->
  <div class="flex justify-center mb-4 gap-2 flex-wrap">
   <button class="tab-btn px-4 py-2 rounded-xl text-sm font-medium bg-white shadow transition transform duration-200 hover:shadow-md hover:scale-95 active:scale-90 focus:outline-none" onclick="showTab('flights')" data-i18n="flights">–ë–∏–ª–µ—Ç—ã</button>

<button class="tab-btn px-4 py-2 rounded-xl text-sm font-medium bg-white shadow transition transform duration-200 hover:shadow-md hover:scale-95 active:scale-90 focus:outline-none" onclick="showTab('hotels')" data-i18n="hotels">–û—Ç–µ–ª–∏</button>

<button class="tab-btn px-4 py-2 rounded-xl text-sm font-medium bg-white shadow transition transform duration-200 hover:shadow-md hover:scale-95 active:scale-90 focus:outline-none" onclick="showTab('places')" data-i18n="places">üåç –ú–µ—Å—Ç–∞</button>

<button class="tab-btn px-4 py-2 rounded-xl text-sm font-medium bg-white shadow transition transform duration-200 hover:shadow-md hover:scale-95 active:scale-90 focus:outline-none" onclick="showTab('favorites')">‚ù§Ô∏è</button>
  </div>

<!-- ‚úàÔ∏è –ü–µ—Ä–µ–ª—ë—Ç—ã -->
<div id="flights" class="tab block">
  <form id="search-form" autocomplete="off" novalidate class="bg-white p-4 rounded-xl shadow mb-4 space-y-4">
 <div class="form-group mt-4">
  <label for="from">–û—Ç–∫—É–¥–∞</label>
  <input type="text" name="from" id="from" class="input" required data-i18n-placeholder="fromCity" />
</div>

  <div class="form-group">
    <label for="to">–ö—É–¥–∞</label>
    <input type="text" name="to" id="to" class="input" required data-i18n-placeholder="toCity" />
  </div>

 <div class="mb-4">
  <label for="flightClass" class="block text-sm font-medium text-gray-900 mb-1">–ö–ª–∞—Å—Å –ø–µ—Ä–µ–ª—ë—Ç–∞</label>
  <div class="relative">
    <select id="flightClass" name="flightClass"
      class="w-full pl-4 pr-10 py-2 text-sm border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
      <option value="Y">–≠–∫–æ–Ω–æ–º</option>
      <option value="C">–ë–∏–∑–Ω–µ—Å</option>
    </select>
    <div class="pointer-events-none absolute inset-y-0 right-3 flex items-center">
      <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" stroke-width="2"
        viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
      </svg>
    </div>
  </div>
</div>
    
    
<!-- üì¶ –ë–ª–æ–∫ —Å –¥–∞—Ç–∞–º–∏ -->
<div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
  <div class="form-group">
    <label class="label" for="departureDate" data-i18n="departure">–î–∞—Ç–∞ –≤—ã–ª–µ—Ç–∞</label>
    <input type="date" name="departureDate" id="departureDate" class="input" required />
  </div>

 <div class="form-group hidden" id="returnDateWrapper">
  <label class="label" for="returnDate">–û–±—Ä–∞—Ç–Ω–æ</label>
  <input
    type="date"
    id="returnDate"
    class="input"
    tabindex="-1"
  />
</div>
</div>

<!-- ‚úÖ –ß–µ–∫–±–æ–∫—Å "–¢—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ" ‚Äî –í–ù–ï grid! -->
<div class="form-group">
  <label class="flex items-center gap-2">
    <input type="checkbox" id="roundTrip" />
    <span data-i18n="roundTrip">–¢—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ</span>
  </label>
</div>
    
  <div class="form-group flex items-center mt-2">
    <input type="checkbox" id="hotOnly" class="mr-2" />
    <label for="hotOnly">üî• –ì–æ—Ä—è—á–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è</label>
  </div>

  <!-- –ö–Ω–æ–ø–∫–∏ -->
  <div class="flex flex-col sm:flex-row gap-2">
    <button type="submit" id="searchBtn" class="btn btn-blue sm:w-auto" data-i18n="findFlights">–ù–∞–π—Ç–∏ –±–∏–ª–µ—Ç—ã</button>
    <button type="button" id="clearFlights" class="btn btn-red sm:w-auto">–û—á–∏—Å—Ç–∏—Ç—å</button>
  </div>
</form>
  
  <!-- –õ–æ–∞–¥–µ—Ä -->
  <div id="flightsLoader" class="flex justify-center my-4 hidden">
    <div class="loader"></div>
  </div>

  <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
 <!-- <h2 class="text-lg font-semibold mt-6" data-i18n="hotelResults"></h2>-->
<div id="hotDeals" class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-2"></div>
</div>
  
<!-- üè® –û—Ç–µ–ª–∏ -->
<div id="hotels" class="tab hidden">
  <form id="hotelForm" class="bg-white p-4 rounded-xl shadow mb-4 space-y-4">
    <h3 class="text-base font-semibold mb-2" data-i18n="hotelFilters"></h3>
    <div class="form-group">
  <label class="label" for="hotelCity" data-i18n="city">–ì–æ—Ä–æ–¥</label>
  <input type="text" id="hotelCity" class="input" required data-i18n-placeholder="city" />
</div>

    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
      <div>
        <label class="label" for="checkIn" data-i18n="checkIn"></label>
        <input type="date" id="checkIn" class="input" />
      </div>
      <div>
        <label class="label" for="checkOut" data-i18n="checkOut"></label>
        <input type="date" id="checkOut" class="input" />
      </div>
    </div>

    <div class="mt-4">
      <label for="toggleFilters" class="label flex items-center gap-2">
        <input type="checkbox" id="toggleFilters" class="checkbox" />
        <span>–§–∏–ª—å—Ç—Ä—ã</span>
      </label>
    </div>

    <div id="hotelFilters" class="hidden mt-2">
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
      
<!-- üí∞ –ü–æ–ª–∑—É–Ω–æ–∫ —Å tooltip -->
<div class="col-span-2 mt-4 mb-6">
  <label for="priceRange" class="label block mb-1" data-i18n="priceTo">–¶–µ–Ω–∞</label>
 <div class="relative w-full pt-10"> <!-- –¥–æ–±–∞–≤–∏–ª–∏ pt-10 -->
  <input
    type="range"
    id="priceRange"
    min="0"
    max="500"
    step="10"
    value="250"
    class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 slider-thumb" />
  <div id="priceTooltip"
    class="absolute -top-11 bg-blue-600 text-white text-xs px-2 py-1 rounded shadow transition-all pointer-events-none">
    $250
  </div>
</div>
</div>
<!-- üè® –¢–∏–ø –∂–∏–ª—å—è (–≤—Ä–µ–º–µ–Ω–Ω–æ —Å–∫—Ä—ã—Ç) -->
<div class="col-span-2 mt-4 hidden">
  <label for="propertyTypeFilter" class="label block mb-1">–¢–∏–ø –∂–∏–ª—å—è</label>
  <select id="propertyTypeFilter"
    class="input w-full bg-sky-100 text-black border border-gray-300 rounded-lg px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
    <option value="">–í—Å–µ</option>
    <option value="hotel">üè® –û—Ç–µ–ª—å</option>
    <option value="apartment">üè¢ –ö–≤–∞—Ä—Ç–∏—Ä–∞</option>
  </select>
</div>
      </div>
    </div>

    <!-- ‚úÖ –ö–Ω–æ–ø–∫–∞ –ù–∞–π—Ç–∏ –æ—Ç–µ–ª—å -->
    <button type="submit" class="btn btn-blue w-full sm:w-auto" data-i18n="findHotel">
      üîç –ù–∞–π—Ç–∏ –æ—Ç–µ–ª—å
    </button>
  </form>
  <div id="hotelsResult"></div>
</div> <!-- ‚úÖ –ó–∞–∫—Ä—ã—Ç–∏–µ –±–ª–æ–∫–∞ –æ—Ç–µ–ª–µ–π -->
  
  <!-- üåç –ú–µ—Å—Ç–∞ -->
<div id="places" class="tab hidden">
    <form id="placeForm" class="bg-white p-4 rounded-xl shadow mb-4 space-y-4">
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <div class="mt-4">
  <label class="label" for="placeCity" data-i18n="city">–ì–æ—Ä–æ–¥</label>
  <input id="placeCity" type="text" class="input w-full" data-i18n-placeholder="city" />
</div>
        <div class="mt-4">
          <label class="label" for="placeMood" data-i18n="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
<select id="placeMood"
        class="input w-full bg-sky-100 text-black border border-gray-300 rounded-lg px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
  <option value="romantic">üíñ –†–æ–º–∞–Ω—Ç–∏–∫–∞</option>
  <option value="adventure">üß≠ –ü—Ä–∏–∫–ª—é—á–µ–Ω–∏—è</option>
  <option value="relax">üåø –†–µ–ª–∞–∫—Å</option>
  <option value="culture">üèõ –ö—É–ª—å—Ç—É—Ä–∞</option>
  <option value="party">üéâ –í–µ—á–µ—Ä–∏–Ω–∫–∞</option>
  <option value="nature">üèû –ü—Ä–∏—Ä–æ–¥–∞</option>
</select>
        </div>
      </div>
      <div>
        
  <label for="gptMode" class="label">–í—ã–±–µ—Ä–∏ –≥–∏–¥–∞</label>
  <select id="gptMode" class="input w-full text-sm bg-yellow-50">
    <option value="basic">üß† –û–±—ã—á–Ω—ã–π</option>
    <option value="pro">üöÄ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</option>
  </select>
</div>
      
     <button type="submit" class="btn btn-blue w-full sm:w-auto">–ü–æ–∫–∞–∑–∞—Ç—å –º–µ—Å—Ç–∞</button>
    </form>
    <div id="placesResult" class="grid gap-4 transition-all duration-300"></div>
  </div>
  
<!-- ‚ù§Ô∏è –ò–∑–±—Ä–∞–Ω–Ω–æ–µ -->
<div id="favorites" class="tab hidden">
<div class="mb-6 flex justify-center">
 <select onchange="switchFavTab(this.value)" 
  class="input w-full text-center bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
  <option value="flights">‚úàÔ∏è –ü–µ—Ä–µ–ª—ë—Ç—ã</option>
  <option value="hotels">üè® –û—Ç–µ–ª–∏</option>
  <option value="places">üåç –ú–µ—Å—Ç–∞</option>
</select>
</div>
  
  <div id="favContent-flights" class="fav-content"></div>
  <div id="favContent-hotels" class="fav-content hidden"></div>
  <div id="favContent-places" class="fav-content hidden"></div>
</div>
  
  <!-- üîÑ –°–ø–∏–Ω–Ω–µ—Ä -->
  <div id="loadingSpinner" class="hidden text-center my-4 text-gray-500">
    <span class="loader inline-block w-6 h-6 border-4 border-blue-400 border-t-transparent rounded-full animate-spin"></span>
    <span class="ml-2 align-middle">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
  </div>

  <!-- –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      setTimeout(() => {
        document.body.classList.remove("opacity-0");
      }, 100);
    });
  </script>
  
 <!-- üõü Safelist –∫–ª–∞—Å—Å–æ–≤ –¥–ª—è Tailwind -->
<!-- üõü Safelist –¥–ª—è Tailwind -->
<div class="hidden">
  <button class="btn btn-blue"></button>
  <button class="btn btn-red"></button>
</div>
  <link rel="icon" href="/favicon.ico" />
<!-- Supabase -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>

<!-- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ -->
<script type="module" src="globals.js"></script>

<!-- –û—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å -->
<script type="module" src="app.js"></script>
<script type="module" src="render.js"></script>

<!-- –°—Ç–∏–ª–∏ -->
<link href="style.css" rel="stylesheet">
<!-- ü™ü –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
<div id="detailsModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
  <div class="bg-white rounded-xl p-6 max-w-sm w-full relative shadow-lg">
    <button onclick="closeModal()" class="absolute top-2 right-2 text-gray-500 text-xl">‚úñ</button>
    <div id="modalContent"></div>
  </div>
</div>

 <button 
  onclick="Telegram.WebApp.openTelegramLink('https://t.me/GoTravelSupportBot')" 
  id="supportButton"
  aria-label="–ü–æ–¥–¥–µ—Ä–∂–∫–∞"
  title="–ù–∞–ø–∏—Å–∞—Ç—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É"
>
  üí¨
</button>
  
  
</body>
</html>
