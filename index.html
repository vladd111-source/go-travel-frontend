<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Go Travel ‚úàÔ∏è</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
    .input {
      @apply w-full px-3 py-2 rounded-xl border border-gray-300 shadow-sm text-sm;
    }
    .btn {
      @apply bg-indigo-500 text-white px-4 py-2 rounded-xl text-sm font-semibold hover:bg-indigo-600;
    }
    .label {
      @apply text-sm font-medium;
    }
  </style>
</head>
<body class="bg-gradient-to-r from-sky-100 to-indigo-100 min-h-screen p-4">
  <div class="max-w-2xl mx-auto">
    <div class="flex justify-between items-center mb-6">
      <h1 class="text-3xl font-bold">Go Travel ‚úàÔ∏è</h1>
      <select id="langSwitcher" class="text-sm border rounded px-2 py-1">
        <option value="ru" selected>RU</option>
        <option value="en">EN</option>
      </select>
    </div>

    <!-- Tabs -->
    <div class="flex justify-center mb-4 gap-2">
      <button class="tab-btn bg-white px-4 py-2 rounded-xl shadow text-sm font-medium" onclick="showTab('flights')">‚úàÔ∏è –ê–≤–∏–∞–±–∏–ª–µ—Ç—ã</button>
      <button class="tab-btn bg-white px-4 py-2 rounded-xl shadow text-sm font-medium" onclick="showTab('hotels')">üè® –û—Ç–µ–ª–∏</button>
      <button class="tab-btn bg-white px-4 py-2 rounded-xl shadow text-sm font-medium" onclick="showTab('sights')">üåç –ú–µ—Å—Ç–∞</button>
    </div>

    <!-- Flights -->
    <div id="flights" class="tab">
      <form id="search-form" class="bg-white p-4 rounded-xl shadow mb-4 space-y-4">
        <input type="text" name="from" placeholder="–û—Ç–∫—É–¥–∞" class="input" required />
        <input type="text" name="to" placeholder="–ö—É–¥–∞" class="input" required />
        <label class="flex items-center gap-2" for="roundTrip">
          <input type="checkbox" id="roundTrip" />
          <span>–¢—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ</span>
        </label>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div>
            <label class="label block mb-1" for="departureDate">–î–∞—Ç–∞ –≤—ã–ª–µ—Ç–∞</label>
            <input type="date" name="departureDate" id="departureDate" class="input" required />
          </div>
          <div>
            <label class="label block mb-1" for="returnDate">–î–∞—Ç–∞ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è</label>
            <input type="date" name="returnDate" id="returnDate" class="input hidden" />
          </div>
        </div>
        <button type="submit" class="btn w-full mt-2">–ù–∞–π—Ç–∏ —Ä–µ–π—Å—ã</button>
      </form>
      <div id="flights-container" class="space-y-4"></div>
    </div>

    <!-- Hotels -->
    <div id="hotels" class="tab hidden">
      <form id="hotelForm" class="bg-white p-4 rounded-xl shadow mb-4 space-y-2">
        <input type="text" placeholder="–ì–æ—Ä–æ–¥" id="hotelCity" class="input" required />
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div>
            <label class="label block mb-1" for="checkIn">–î–∞—Ç–∞ –∑–∞–µ–∑–¥–∞</label>
            <input type="date" id="checkIn" class="input" />
          </div>
          <div>
            <label class="label block mb-1" for="checkOut">–î–∞—Ç–∞ –≤—ã–µ–∑–¥–∞</label>
            <input type="date" id="checkOut" class="input" />
          </div>
        </div>
        <input type="number" placeholder="–ì–æ—Å—Ç–µ–π" id="guests" min="1" class="input" />
        <button type="submit" class="btn w-full">–ù–∞–π—Ç–∏ –æ—Ç–µ–ª—å</button>
      </form>
      <div id="hotelsResult"></div>
    </div>

    <!-- Sights -->
    <div id="sights" class="tab hidden">
      <div class="grid gap-4">
        <div class="bg-white p-4 rounded-xl shadow">
          <h3 class="text-lg font-semibold">Castelo de S√£o Jorge</h3>
          <p class="text-sm text-gray-500">‚≠ê 4.7 | –õ–∏—Å—Å–∞–±–æ–Ω</p>
        </div>
        <div class="bg-white p-4 rounded-xl shadow">
          <h3 class="text-lg font-semibold">Miradouro da Senhora do Monte</h3>
          <p class="text-sm text-gray-500">‚≠ê 4.8 | –ü–∞–Ω–æ—Ä–∞–º–Ω—ã–π –≤–∏–¥</p>
        </div>
        <div class="bg-white p-4 rounded-xl shadow">
          <h3 class="text-lg font-semibold">Ocean√°rio de Lisboa</h3>
          <p class="text-sm text-gray-500">‚≠ê 4.6 | –û–¥–∏–Ω –∏–∑ –ª—É—á—à–∏—Ö –æ–∫–µ–∞–Ω–∞—Ä–∏—É–º–æ–≤ –ï–≤—Ä–æ–ø—ã</p>
        </div>
      </div>
    </div>
  </div>

  <script>
    const userId = window.Telegram?.WebApp?.initDataUnsafe?.user?.id;

    const flights = [
      { airline: 'Ryanair', from: 'Kyiv', to: 'Lisbon', price: 140, transfers: 1 },
      { airline: 'WizzAir', from: 'Lviv', to: 'Barcelona', price: 120, transfers: 0 },
    ];

    function renderFlights(data) {
      const container = document.getElementById('flights-container');
      container.innerHTML = '';
      data.forEach((flight) => {
        const card = document.createElement('div');
        card.className = 'bg-white shadow rounded-xl p-4';
        card.innerHTML = `
          <div class="flex justify-between items-center mb-1">
            <span class="text-sm font-semibold">${flight.airline}</span>
            <span class="text-sm text-indigo-500">$${flight.price}</span>
          </div>
          <div class="text-sm">${flight.from} ‚úàÔ∏è ${flight.to}</div>
          <div class="text-xs text-gray-500">–ü–µ—Ä–µ—Å–∞–¥–æ–∫: ${flight.transfers}</div>
        `;
        container.appendChild(card);
      });
    }

    renderFlights(flights);

    function showTab(id) {
      document.querySelectorAll('.tab').forEach(tab => tab.classList.add('hidden'));
      document.getElementById(id).classList.remove('hidden');
    }

    document.getElementById('search-form').addEventListener('submit', (e) => {
      e.preventDefault();
      const from = e.target.from.value;
      const to = e.target.to.value;
      const departureDate = document.getElementById("departureDate").value;
      const returnDate = document.getElementById("returnDate").value;
      const isRoundTrip = document.getElementById("roundTrip").checked;
      alert(`–ü–æ–∏—Å–∫: ${from} ‚Üí ${to}${isRoundTrip ? ` (–æ–±—Ä–∞—Ç–Ω–æ ${returnDate})` : ''} –Ω–∞ ${departureDate}`);
    });

    document.getElementById("hotelForm").addEventListener("submit", (e) => {
      e.preventDefault();
      const city = document.getElementById("hotelCity").value;
      const checkIn = document.getElementById("checkIn").value;
      const checkOut = document.getElementById("checkOut").value;
      const guests = document.getElementById("guests").value;

      const mockHotels = [
        { name: "Hotel Sunrise", price: 85, city, rating: 8.9 },
        { name: "Ocean View", price: 120, city, rating: 9.1 },
        { name: "Budget Stay", price: 40, city, rating: 7.5 },
      ];

      const resultBlock = document.getElementById("hotelsResult");
      resultBlock.innerHTML = "<h3 class='font-semibold mb-2'>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:</h3>" + mockHotels.map(
        (hotel) => `
          <div class="bg-white border p-4 rounded-xl mb-2">
            <strong>${hotel.name}</strong> (${hotel.city})<br>
            –¶–µ–Ω–∞: $${hotel.price} / –Ω–æ—á—å<br>
            –†–µ–π—Ç–∏–Ω–≥: ${hotel.rating}
          </div>`
      ).join("");
    });

    const roundTripCheckbox = document.getElementById("roundTrip");
    const returnDateInput = document.getElementById("returnDate");

    roundTripCheckbox.addEventListener("change", () => {
      if (roundTripCheckbox.checked) {
        returnDateInput.classList.remove("hidden");
        returnDateInput.required = true;
      } else {
        returnDateInput.classList.add("hidden");
        returnDateInput.required = false;
        returnDateInput.value = "";
      }
    });

    const translations = {
      ru: {
        flights: "‚úàÔ∏è –ê–≤–∏–∞–±–∏–ª–µ—Ç—ã",
        hotels: "üè® –û—Ç–µ–ª–∏",
        sights: "üåç –ú–µ—Å—Ç–∞",
        findFlights: "–ù–∞–π—Ç–∏ —Ä–µ–π—Å—ã",
        roundTrip: "–¢—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ",
        departure: "–î–∞—Ç–∞ –≤—ã–ª–µ—Ç–∞",
        return: "–î–∞—Ç–∞ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è"
      },
      en: {
        flights: "‚úàÔ∏è Flights",
        hotels: "üè® Hotels",
        sights: "üåç Places",
        findFlights: "Search Flights",
        roundTrip: "Round Trip",
        departure: "Departure Date",
        return: "Return Date"
      }
    };

    function applyTranslations(lang) {
      const t = translations[lang];
      document.querySelector('[onclick*="flights"]').textContent = t.flights;
      document.querySelector('[onclick*="hotels"]').textContent = t.hotels;
      document.querySelector('[onclick*="sights"]').textContent = t.sights;
      document.querySelector('button[type="submit"]').textContent = t.findFlights;
      document.querySelector('label[for="departureDate"]').textContent = t.departure;
      document.querySelector('label[for="returnDate"]').textContent = t.return;
      document.querySelector('label[for="roundTrip"]').nextElementSibling.textContent = t.roundTrip;
    }

    document.getElementById("langSwitcher").addEventListener("change", (e) => {
      applyTranslations(e.target.value);
    });

    applyTranslations("ru");
  </script>
</body>
</html>
