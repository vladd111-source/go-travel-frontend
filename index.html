<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Go Travel ‚úàÔ∏è</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- –®—Ä–∏—Ñ—Ç -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <!-- Telegram WebApp SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- –°—Ç–∏–ª–∏ -->
  <link rel="stylesheet" href="css/style.css">
  <style>
    @media (max-width: 400px) {
      h1 {
        font-size: 1.25rem !important;
      }
      .tab-btn {
        padding: 0.5rem 0.75rem !important;
        font-size: 0.75rem !important;
      }
      .btn {
        font-size: 0.75rem !important;
        padding: 0.4rem 0.75rem !important;
      }
    }
  </style>
</head>
<body class="bg-gradient-to-r from-sky-100 to-indigo-100 min-h-screen p-4 font-[Inter]">
  <div class="w-full max-w-2xl mx-auto px-2 sm:px-4 relative">
    <!-- –Ø–∑—ã–∫–æ–≤–æ–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É -->
    <select id="langSwitcher"
      class="absolute top-0 right-0 mt-2 mr-2 text-sm bg-white border border-gray-300 rounded px-2 py-1 shadow-sm focus:outline-none">
      <option value="ru">RU</option>
      <option value="en">EN</option>
    </select>

    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-2 pr-12">
      <h1 class="text-2xl sm:text-3xl font-bold leading-tight">Go Travel ‚úàÔ∏è</h1>
    </div>
  </div>

  <div class="flex justify-center mb-4 gap-2 flex-wrap">
    <button class="tab-btn bg-white px-4 py-2 rounded-xl shadow text-sm font-medium" onclick="showTab('flights')" data-i18n="flights"></button>
    <button class="tab-btn bg-white px-4 py-2 rounded-xl shadow text-sm font-medium" onclick="showTab('hotels')" data-i18n="hotels"></button>
    <button class="tab-btn bg-white px-4 py-2 rounded-xl shadow text-sm font-medium" onclick="showTab('sights')" data-i18n="sights"></button>
  </div>

  <!-- ‚úàÔ∏è –ê–≤–∏–∞–±–∏–ª–µ—Ç—ã -->
  <div id="flights" class="tab block">
    <form id="search-form" class="bg-white p-4 rounded-xl shadow mb-4 space-y-4">
      <input type="text" name="from" class="input" required data-i18n-placeholder="city" />
      <input type="text" name="to" class="input" required data-i18n-placeholder="city" />

      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <div>
          <label class="label" for="departureDate" data-i18n="departure"></label>
          <input type="date" name="departureDate" id="departureDate" class="input" required />
        </div>
        <div id="returnDateWrapper" class="hidden">
          <label class="label" for="returnDate" data-i18n="return"></label>
          <input type="date" name="returnDate" id="returnDate" class="input" />
        </div>
      </div>

      <label class="flex items-center gap-2">
        <input type="checkbox" id="roundTrip" />
        <span data-i18n="roundTrip"></span>
      </label>

      <button type="submit" class="btn w-full sm:w-auto" data-i18n="findFlights"></button>
    </form>

    <h2 class="text-lg font-semibold mt-6" data-i18n="hotelResults"></h2>
    <div id="hotDeals" class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-2"></div>
  </div>

  <!-- üè® –û—Ç–µ–ª–∏ -->
  <div id="hotels" class="tab hidden">
    <form id="hotelForm" class="bg-white p-4 rounded-xl shadow mb-4 space-y-4">
      <h3 class="text-base font-semibold mb-2" data-i18n="hotelFilters"></h3>
      <input type="text" id="hotelCity" class="input" required data-i18n-placeholder="city" />
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <div>
          <label class="label" for="checkIn" data-i18n="checkIn"></label>
          <input type="date" id="checkIn" class="input" />
        </div>
        <div>
          <label class="label" for="checkOut" data-i18n="checkOut"></label>
          <input type="date" id="checkOut" class="input" />
        </div>
      </div>

      <!-- ‚úÖ –§–∏–ª—å—Ç—Ä—ã -->
      <label class="flex items-center gap-2 mt-2 text-sm font-medium">
        <input type="checkbox" id="toggleFilters" />
        <span>–§–∏–ª—å—Ç—Ä—ã</span>
      </label>
      <div id="hotelFilters" class="hidden mt-2">
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div>
            <label class="label" for="minPrice" data-i18n="priceFrom"></label>
            <input type="number" id="minPrice" class="input" min="0" />
          </div>
          <div>
            <label class="label" for="maxPrice" data-i18n="priceTo"></label>
            <input type="number" id="maxPrice" class="input" min="0" />
          </div>
        </div>
        <div>
          <label class="label" for="minRating" data-i18n="ratingMin"></label>
          <input type="number" id="minRating" class="input" min="0" max="10" step="0.1" />
        </div>
      </div>

      <button type="submit" class="btn w-full sm:w-auto" data-i18n="findHotel"></button>
    </form>
    <div id="hotelsResult"></div>
  </div>

  <!-- üåç –ú–µ—Å—Ç–∞ -->
  <div id="sights" class="tab hidden">
    <form id="placeForm" class="bg-white p-4 rounded-xl shadow mb-4 space-y-4">
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <div>
          <label class="label" for="placeCity" data-i18n="city">–ì–æ—Ä–æ–¥</label>
          <input id="placeCity" type="text" class="input w-full" data-i18n-placeholder="city" />
        </div>
        <div>
          <label class="label" for="placeCategory" data-i18n="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
          <select id="placeCategory"
            class="input w-full bg-sky-100 text-black border border-gray-300 rounded-lg px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
            <option value="">–í—Å–µ</option>
            <option value="nature">üèû –ü—Ä–∏—Ä–æ–¥–∞</option>
            <option value="culture">üè∞ –ö—É–ª—å—Ç—É—Ä–∞</option>
            <option value="fun">üé¢ –†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</option>
            <option value="shopping">üõç –®–æ–ø–∏–Ω–≥</option>
            <option value="food">üçΩ –ï–¥–∞</option>
          </select>
        </div>
      </div>
      <button type="submit" class="btn w-full mt-2 sm:w-auto" data-i18n="findSights">–ü–æ–∫–∞–∑–∞—Ç—å –º–µ—Å—Ç–∞</button>
    </form>
    <div id="placesResult" class="grid gap-4 transition-all duration-300"></div>
  </div>

  <!-- üîÑ –°–ø–∏–Ω–Ω–µ—Ä -->
  <div id="loadingSpinner" class="hidden text-center my-4 text-gray-500">
    <span class="loader inline-block w-6 h-6 border-4 border-blue-400 border-t-transparent rounded-full animate-spin"></span>
    <span class="ml-2 align-middle">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
  </div>

  <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <script src="js/main.js"></script>

  <!-- –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      setTimeout(() => {
        document.body.classList.remove("opacity-0");
      }, 100);
    });
  </script>
  <script src="main.js"></script>
</body>
</html>
